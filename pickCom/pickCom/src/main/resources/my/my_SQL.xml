<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="my">
  <!--  로그인 한 회원의 상품 주문 일자, 총 주문 금액, 주문상태 출력 -->
    <select id="selectOrderList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            ORDER_DATE,
            ORDER_TOTAL_ORDER_PRICE,
            ORDER_STATE
        FROM
            ORDER_LIST
        WHERE
            MEMBER_NO = #{MEMBER_NO}
        ]]>
	</select>

    <!-- 로그인 한 회원의 정보 출력 (마이페이지 회원정보 수정) -->
    <select id="memberModify" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            MEMBER_NO,
            MEMBER_ID,
            MEMBER_NAME,
            MEMBER_PASSWD,
            TO_CHAR(MEMBER_BIRTH,'YYYY/MM/DD') MEMBER_BIRTH,
            MEMBER_EMAIL,
            MEMBER_PHONE,
            MEMBER_ZIPCODE,
            MEMBER_ADDR1,
            MEMBER_ADDR2,
            EMAIL_AGREE,
            SMS_AGREE
        FROM
            MEMBER
        WHERE
            MEMBER_ID = #{MEMBER_ID}
        ]]>
	</select>

    <!-- 회원정보 수정 전 비밀번호 확인 -->
    <select id="passwdCheck" parameterType="hashMap" resultType="String">
	<![CDATA[
        SELECT
            MEMBER_ID
        FROM
            MEMBER
        WHERE
            MEMBER_PASSWD = #{MEMBER_PASSWD} AND MEMBER_ID = #{MEMBER_ID}
        ]]>
	</select>

    <!-- 비밀번호 변경 -->
    <update id="passwdChange" parameterType="hashmap">
        UPDATE MEMBER SET
        MEMBER_NAME = #{MEMBER_NAME},
        <if test="MEMBER_NEWPASSWD != null and MEMBER_NEWPASSWD != ''">
            MEMBER_PASSWD = #{MEMBER_NEWPASSWD},
        </if>
        MEMBER_PHONE = #{MEMBER_PHONE},
        MEMBER_ZIPCODE = #{MEMBER_ZIPCODE},
        MEMBER_ADDR1 = #{MEMBER_ADDR1},
        MEMBER_ADDR2 = #{MEMBER_ADDR2},
        MEMBER_BIRTH = #{MEMBER_BIRTH},
        EMAIL_AGREE = #{EMAIL_AGREE},
        SMS_AGREE = #{SMS_AGREE}
        WHERE
        MEMBER_NO = #{MEMBER_NO}
    </update>

    <update id="memberDelete">
        UPDATE MEMBER SET
            MEMBER_DELETE = '1'
        WHERE
            MEMBER_ID = #{MEMBER_ID}
    </update>

    <!-- 게시글 좋아요 목록 -->
    <select id="boardLikeList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            L.LIKE_NO,L.GOODS_NO,
            G.GOODS_NAME,G.GOODS_SELL_PRICE,G.GOODS_THUMBNAIL
        FROM
            GOODS_LIKE L, GOODS G
        WHERE
            L.MEMBER_NO = #{MEMBER_NO}
          AND L.GOODS_NO = G.GOODS_NO
        ]]>
	</select>

    <!-- 제품 좋아요 목록 -->
    <select id="productLikeList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            L.LIKE_NO,L.GOODS_NO,
            G.GOODS_NAME,G.GOODS_SELL_PRICE,G.GOODS_THUMBNAIL
        FROM
            GOODS_LIKE L, GOODS G
        WHERE
            L.MEMBER_NO = #{MEMBER_NO}
          AND L.GOODS_NO = G.GOODS_NO
        ]]>
	</select>

    <!-- 게시글 목록 -->
    <select id="boardList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            Q.GOODS_QNA_NO, Q.GOODS_NO, Q.GOODS_QNA_CONTENT,
            Q.GOODS_QNA_TITLE, Q.GOODS_QNA_LEVEL, Q.GOODS_QNA_DATE,
            Q.GOODS_QNA_SECRET, Q.GOODS_QNA_AN, G.GOODS_NAME, G.GOODS_THUMBNAIL
        FROM
            GOODS_QNA Q, GOODS G
        WHERE
            MEMBER_NO = #{MEMBER_NO}
          AND Q.GOODS_NO = G.GOODS_NO
        ]]>
	</select>

    <!-- 댓글 목록 -->
    <select id="replyList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            Q.GOODS_QNA_NO, Q.GOODS_NO, Q.GOODS_QNA_CONTENT,
            Q.GOODS_QNA_TITLE, Q.GOODS_QNA_LEVEL, Q.GOODS_QNA_DATE,
            Q.GOODS_QNA_SECRET, Q.GOODS_QNA_AN, G.GOODS_NAME, G.GOODS_THUMBNAIL
        FROM
            GOODS_QNA Q, GOODS G
        WHERE
            MEMBER_NO = #{MEMBER_NO}
          AND Q.GOODS_NO = G.GOODS_NO
        ]]>
	</select>

    <!-- 리뷰 목록 -->
    <select id="reviewList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
        SELECT
            R.REVIEW_NO, R.MEMBER_NO, R.ORDER_NO, R.ORDER_DETAIL_NO,
            R.REVIEW_TITLE, R.REVIEW_CONTENT, R.REVIEW_RATING, R.REVIEW_DATE,
            R.GOODS_NO, R.REVIEW_READCNT, R.REVIEW_IMG, R.MEMBER_NAME,
            G.GOODS_NAME, G.GOODS_THUMBNAIL
        FROM
            REVIEW R, GOODS G
        WHERE
            MEMBER_NO = #{MEMBER_NO}
          AND R.GOODS_NO = G.GOODS_NO
        ]]>
	</select>





</mapper>